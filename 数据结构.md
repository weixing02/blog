#### 红黑树

红黑树是一种近似平衡二叉树，确保任何一个节点的左右子树的高度不会超过二者中较低的一倍；

- 定义：
  - 每个节点要么是红色，要么是黑色；
  - 根节点必须是黑色；
  - 红色节点不能连续（红色节点的孩子和父亲都不能是红色）
  - 对于每个节点，从该节点到叶子节点任何路劲都包含相同个数的黑色节点；

当插入或者删除节点时，树的结构会被破坏，不满足定义，有两种调整形式：
- 调整颜色；
- 调整结构；

https://www.sohu.com/a/201923614_466939

#### 红黑树和平衡二叉树的区别

平衡二叉树是高度平衡的，它只允许高度差为正负一，而红黑树则是要求高度差不能超过一倍，这会导致在频繁地插入和删除操作中，平衡二叉树每次都需要大量地进行旋转来调整树的结构，而红黑树不用太多考虑高度的问题，对于高度差比较容忍，只是在插入的节点的父节点是红色时需要进行最多三次的旋转操作和几次变色就可以达到相对平衡的状态，所以性能会比较好。

红黑树的颜色有什么意义：红色和黑色的节点用于保持红黑树的相对平衡，因为黑色节点可以连续存在，但是红色节点只能间接存在，并且左右子树的每个到叶子节点的黑色节点个数必须相同，所以左右子树的高度差一定不会超过一倍，最差的平衡情况就是，左边都是连续的黑色，右边都是黑色和红色间隔的，这样左右差刚好是一倍；

为什么要插入红色节点：因为如果插入的是黑色的节点，那么就和普通的平衡二叉树没有区别了，而且根据黑色节点的个数相同的定义，这样树在大多数情况下是不成立的，所以要插入红色节点，再根据树的情况进行判断；

#### B树的概念

B树就是B-树，多路平衡查找树，一颗m阶B树满足以下性质：

- 每个节点至多有m个子树；
- 根节点至少有两颗子树；
- 除根节点外，至少有\ceiling{m/2}个子树；
- 所有叶节点都在同一层上；
- 所有节点都包含如下形式```{n, A0, K1, A1, K2 ... Kn, An}```

其中n为关键字的个数，$K1<K2<...<Kn$，如果是一颗3阶B树，那么至少有一个关键字和两个子树指针，最多有两个关键字和三个子树指针；

为什么B树可以做文件存储和数据库存储：

因为在磁盘上定位数据和存取数据的动作是机械的，我们在利用查找树进行查找数据，每次访问一个节点都需要重新定位一次，也就是定位的次数是和树的高度成正比的，一般是O(logn)，如果把树的高度尽可能的降低，那在磁盘上去寻找数据的过程就会降低定位的次数，也就加快了搜索的效率；

#### B+树的概念

一颗m阶的B+树的定义如下：

- 树中每个节点至多有m颗子树；
- 根节点至少有一颗子树，除根节点外，至少有\ceiling{m/2}个子树；
- 所有叶子节点存放在同一层上，按从小到大存放所有关键字，并且各叶子节点顺序链接；
- 有n颗子树的节点有n个关键字；
- 所有非叶子节点可以看成叶子节点的索引，节点中的关键字Ki与指向子树的指针Pi构成对子树的索引项（Ki，Pi），Ki是子树中最大的关键字；

B+树是B树的特殊情形，她们的不同之处在于：

- B+树所有关键字都放在叶子节点中，非页节点的关键字是其子树的最大关键字的拷贝；
- 叶节点包含了全部关键字及指向相应数据记录存放地址的指针，且叶节点本身按关键字从小到大进行链接；

B+树比较适合做数据库索引，因为数据库中存在大量的基于范围的查询，而B+树中的叶子节点存放了所有数据，并且这些数据是链接在一起的，可以很方便地进行范围查询，而如果使用B-树则需要通过中序遍历来查找某个范围内的值，所以B+树更加适合作为数据库索引；

####


